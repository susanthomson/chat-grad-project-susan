<div style="border-style: solid">
    <div ng-if="activeConversation">
    <div ng-click="conversationWindow.showTopicChange = !conversationWindow.showTopicChange">
        Talking about
        {{ activeConversation.topic }} with
        <span ng-repeat="participant in activeConversation.participants | notUser:user._id"> {{ participant | screenName }}</span>
    </div>
    <div ng-show="conversationWindow.showTopicChange">
        <input type="text" ng-model="conversationWindow.topicText">
        <button ng-click="changeTopic(activeConversation.id, conversationWindow.topicText)">Change topic</button>
        <button ng-click="clearMessages(activeConversation.id)">Clear conversation</button>
    </div>
    <div ng-repeat="message in activeConversation.messages track by $index">
        on {{ message.timestamp | date: "shortDate" }} at  {{ message.timestamp | date: "shortTime" }},
        {{ message.sender | screenName }}
        <span ng-if="message.system">***{{ message.message }} ***</span>
        <span ng-if="!message.system">said: {{ message.message }} </span>
    </div>
    <input type="text" ng-model="conversationWindow.messageText">
    <button ng-click="sendMessage(activeConversation.id, conversationWindow.messageText)">Send a message</button>
    </div>
</div>